<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ë°©ë‘ ê¸¸ë“œ | ë§ˆë¹„ë…¸ê¸° ëª¨ë°”ì¼</title>
  <meta name="description" content="ë§ˆë¹„ë…¸ê¸° ëª¨ë°”ì¼ ë¼ì‚¬ ì„œë²„ ë°©ë‘ ê¸¸ë“œ ê³µì§€ & ê²Œì„ ê¿€íŒ" />
  <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css" />
    <style>
    :root{
      --bg:#fff0f6;

      --card:#ffffff;
      --card2:#fff6fb;

      --text:#3b2a30;
      --muted:#9a7c86;
      --line:rgba(243,154,178,.25);

      --brand:#f48fb1;
      --brand2:#f8bbd0;
      --warn:#ffb3a7;
      --danger:#ff7aa2;
      --ok:#8fcfb5;

      --shadow: 0 12px 30px rgba(244,143,177,.28);
      --radius: 22px;
      --radius2: 18px;
    }
    *{box-sizing:border-box}
    

    /* Prevent mobile browsers from auto-enlarging text */
    html{
      -webkit-text-size-adjust: 100%;
      text-size-adjust: 100%;
    }

html,body{
      margin:0;
      font-family: "Pretendard", -apple-system, BlinkMacSystemFont,
                   "Segoe UI", Roboto, "Noto Sans KR",
                   "Apple SD Gothic Neo", "Malgun Gothic", sans-serif;
      color:var(--text);
      background:
        radial-gradient(1200px 500px at 10% 0%, rgba(244,143,177,.25), transparent 60%),
        radial-gradient(900px 500px at 90% 10%, rgba(248,187,208,.20), transparent 55%),
        var(--bg);
    }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans KR", "Apple SD Gothic Neo", "Malgun Gothic", Arial, sans-serif;
      color:var(--text);
      background:
        radial-gradient(1200px 500px at 10% 0%, rgba(122,162,255,.20), transparent 60%),
        radial-gradient(900px 500px at 90% 10%, rgba(155,255,214,.12), transparent 55%),
        radial-gradient(800px 500px at 50% 100%, rgba(255,204,102,.10), transparent 55%),
        var(--bg);
    }
    a{color:inherit;text-decoration:none}
    .wrap{max-width:1100px;margin:0 auto;padding:22px 18px 60px}
    .topbar{
      position:sticky;top:0;z-index:50;
      backdrop-filter: blur(10px);
      background: linear-gradient(to bottom, rgba(255,240,246,.92), rgba(255,240,246,.70));
      border-bottom:1px solid var(--line);
    }
    .topbar .inner{max-width:1100px;margin:0 auto;padding:14px 18px;display:flex;gap:14px;align-items:center;justify-content:space-between}
    .brand{
      display:flex;gap:10px;align-items:center;
      font-weight:800;letter-spacing:.2px
    }
    .badge{
      font-size:12px;
      color:var(--muted);
      padding:4px 10px;
      border:1px solid rgba(244,143,177,.25);
      border-radius:999px;
      background:#fff7fa;
    }
    nav{display:flex;gap:8px;flex-wrap:wrap;justify-content:flex-end}
    .navbtn{
      font-size:13px;color:var(--muted);
      padding:8px 10px;border-radius:999px;
      border:1px solid transparent;
    }
    .navbtn:hover{color:var(--text);border-color:var(--line);background:#fff7fa}
    .hero{
      margin-top:18px;
      background: linear-gradient(135deg, #ffffff, #ffe9f1);
      border:1px solid rgba(244,143,177,.25);
      box-shadow: var(--shadow);
      border-radius: var(--radius);
      padding:26px 22px;
      display:grid;grid-template-columns: 1.2fr .8fr;gap:18px;
    }
    .hero h1{margin:0 0 8px;font-size:28px;line-height:1.15}
    .hero p{margin:0;color:var(--muted);line-height:1.55}
    .chips{margin-top:14px;display:flex;gap:8px;flex-wrap:wrap}
    .chip{
      font-size:12px;
      padding:7px 10px;border-radius:999px;
      border:1px solid var(--line);
      background:#fff7fa;
      color:var(--muted)
    }
    .heroCard{
      border-radius: var(--radius2);
      border:1px solid rgba(244,143,177,.18);
      background:#fffafb;
      padding:14px 14px;
    }
    .kv{
      display:grid;gap:10px
    }
    .kvRow{
      display:flex;justify-content:space-between;gap:12px;
      padding:10px 10px;border-radius:12px;
      border:1px solid rgba(255,255,255,.07);
      background:#fff7fa
    }
    .kvRow .k{color:var(--muted);font-size:12px}
    .kvRow .v{font-weight:700;font-size:13px}
    .ctaRow{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
    .btn{
      cursor:pointer;
      border:1px solid rgba(244,143,177,.35);
      background:#fff5f9;
      color:var(--text);
      padding:8px 10px;
      border-radius:16px;
      font-weight:700;
      font-size:13px;
      display:inline-flex;
      align-items:center;
      gap:6px;
    }
    .btn:hover{filter:brightness(1.02)}
    .btn.primary{
      background: linear-gradient(135deg, #f8bbd0, #f48fb1);
      color:#ffffff;
      border:none;
      box-shadow: 0 6px 16px rgba(244,143,177,.35);
    }
    .grid{margin-top:18px;display:grid;grid-template-columns:1fr 1fr;gap:14px}
    section.card{
      border-radius: var(--radius);
      border:1px solid rgba(244,143,177,.25);
      background: linear-gradient(180deg, #ffffff, #fff3f8);
      box-shadow: var(--shadow);
      padding:18px 16px;
    }
    section.card h2{margin:0 0 10px;font-size:18px}
    .sub{color:var(--muted);font-size:13px;margin:0 0 14px;line-height:1.5}
    .toolbar{display:flex;gap:8px;flex-wrap:wrap;align-items:center;margin:10px 0 12px}
    .pill{
      cursor:pointer;
      font-size:12px;
      color:var(--muted);
      padding:7px 10px;
      border-radius:999px;
      border:1px solid rgba(244,143,177,.25);
      background:#fff3f8;
      user-select:none;
    }
    .pill.active{background: linear-gradient(135deg, #f8bbd0, #f48fb1); color:#ffffff; border:none}
    .input{
      width:100%;
      padding:10px 12px;
      border-radius:16px;
      border:1px solid rgba(244,143,177,.25);
      background:#ffffff;
      color:var(--text);
      outline:none;
      font-size:13px;
    }
    .list{display:grid;gap:10px}
    .item{
      border:1px solid rgba(244,143,177,.18);
      background:#fffafb;
      border-radius:16px;
      padding:12px 12px;
    }
    .itemTop{display:flex;justify-content:space-between;gap:10px;align-items:flex-start}
    .tag{
      font-size:11px;
      font-weight:800;
      padding:4px 8px;
      border-radius:999px;
      border:1px solid rgba(244,143,177,.25);
      color:var(--muted);
      background:#fff0f6;
      white-space:nowrap;
    }
    .tag.important{background:#ffe4ec; color:#d94c7a; border-color:rgba(217,76,122,.25)}
    .tag.event{background:#fde2f0; color:#c94b78; border-color:rgba(201,75,120,.22)}
    .tag.ops{background:#ffeaf2; color:#b85a7c; border-color:rgba(184,90,124,.22)}
    .tag.tip{background:#e9fbf4; color:#4e8b73; border-color:rgba(78,139,115,.22)}
    .title{margin:0;font-weight:850;font-size:14px;line-height:1.35}
    .meta{margin-top:6px;color:var(--muted);font-size:12px;display:flex;gap:10px;flex-wrap:wrap}
    details{border-top:1px dashed rgba(255,255,255,.10);margin-top:10px;padding-top:10px}
    details summary{cursor:pointer;color:var(--text);font-weight:800;font-size:13px;list-style:none}
    details summary::-webkit-details-marker{display:none}
    .content{color:var(--muted);font-size:13px;line-height:1.6;margin-top:10px}
    footer{
      margin-top:18px;color:var(--muted);font-size:12px;
      padding: 18px 10px 0;
      text-align:center;opacity:.9
    }
    .twoCol{
      display:grid;grid-template-columns:1fr 1fr;gap:10px
    }
    .miniCard{
      border:1px solid rgba(244,143,177,.18);
      background:#fffafb;
      border-radius:18px;
      padding:12px;
    }
    .miniCard h3{margin:0 0 6px;font-size:14px}
    .miniCard p{margin:0;color:var(--muted);font-size:13px;line-height:1.55}

/* ===== ëŸ¬ë¸”ë¦¬ ë§ˆë¬´ë¦¬ ===== */
section.card h2{
  display:flex;
  align-items:center;
  gap:6px;
  color:#d86b94;
}
.hero h1{color:#d86b94}
.emoji{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  font-size:18px;
  filter:saturate(.75) brightness(1.08);
}

    .btn.ribbon{
      position:relative;
      padding-left:14px;
      padding-right:14px;
      border-radius:999px;
      box-shadow: 0 10px 22px rgba(244,143,177,.28);
    }
    .btn.ribbon::before,
    .btn.ribbon::after{
      content:"";
      position:absolute;
      top:50%;
      width:10px;height:10px;
      border-radius:999px;
      background:rgba(255,255,255,.75);
      transform:translateY(-50%);
      filter:blur(.1px);
    }
    .btn.ribbon::before{left:10px}
    .btn.ribbon::after{right:10px}
    .btn.ribbon:hover{transform:translateY(-1px)}


    
    /* Mobile-safe wrapping for long text/URLs */
    .card p, .miniCard p, .content, .meta, .kvRow .v{
      overflow-wrap:anywhere;
      word-break:break-word;
    }
    a{
      overflow-wrap:anywhere;
      word-break:break-word;
    }


    
    /* Photo preview grid: 4 on desktop, 2 on mobile */
    .photoGrid{
      display:grid;
      grid-template-columns: repeat(4, 1fr);
      gap:12px;
    }


    /* Make photo board span full row on desktop to remove empty space */
    @media (min-width: 901px){
      #photos{grid-column: 1 / -1;}
    }
    @media (max-width: 900px){
      .hero{grid-template-columns:1fr}
      .grid{grid-template-columns:1fr}
      nav{justify-content:flex-start}
      .twoCol{grid-template-columns:1fr}
      .photoGrid{grid-template-columns: repeat(2, 1fr)}

    }
  
/* ===== í†µí•© í…ìŠ¤íŠ¸ ë§í¬ ë²„íŠ¼ (ê¿€íŒ/ì‚¬ì§„ "ë°”ë¡œê°€ê¸°") ===== */
.linkRow{
  display:flex;
  justify-content:flex-end;
  margin-top:12px;
}
.textLinkBtn{
  display:inline-block;
  font-size:13px;
  font-weight:750;
  color:var(--muted);
  padding:6px 2px;
  position:relative;
  text-decoration:none;
  transition: color .2s ease, transform .2s ease;
  overflow:hidden;
  -webkit-tap-highlight-color: transparent;
}
.textLinkBtn::after{
  content:"";
  position:absolute;
  left:0;
  bottom:-2px;
  width:0%;
  height:1px;
  background:var(--brand);
  transition: width .2s ease;
}
/* âœ¨ shimmer (hover/focus) */
.textLinkBtn::before{
  content:"";
  position:absolute;
  top:0;
  left:-130%;
  width:130%;
  height:100%;
  background: linear-gradient(120deg, transparent, rgba(255,255,255,.55), transparent);
  transition: left .45s ease;
  pointer-events:none;
}
.textLinkBtn:hover,
.textLinkBtn:focus-visible{
  color:var(--text);
  transform: translateX(2px);
}
.textLinkBtn:hover::after,
.textLinkBtn:focus-visible::after{
  width:100%;
}
.textLinkBtn:hover::before,
.textLinkBtn:focus-visible::before{
  left:130%;
}
/* ëª¨ë°”ì¼: ê°€ìš´ë° / ë°ìŠ¤í¬íƒ‘: ì˜¤ë¥¸ìª½ */
@media (max-width: 900px){
  .linkRow{justify-content:center;}
}


/* ===== ê·€ì—¬ìš´ ìŒì•… ë²„íŠ¼ ===== */
.btn.music{
  border:1px solid rgba(244,143,177,.28);
  background: #ffffff;
}
.btn.music.playing{
  background: linear-gradient(135deg, #f8bbd0, #f48fb1);
  color:#ffffff;
  border:none;
  box-shadow: 0 6px 16px rgba(244,143,177,.30);
}
.btn.music .note{
  display:inline-block;
  transform: translateY(0);
  animation: noteFloat 1.2s ease-in-out infinite;
}
.btn.music:not(.playing) .note{max-width:360px;flex:1 1 320px;min-width:260px}
.musicBar{
  position:relative;
  display:flex;
  align-items:center;
  gap:8px;
  border-radius:18px;
  border:1px solid rgba(244,143,177,.25);
  background: linear-gradient(135deg, #fff, #ffe9f1);
  box-shadow: 0 10px 22px rgba(244,143,177,.22);
  padding:10px 12px;
  overflow:hidden;
}
.mwInfo{display:flex;align-items:center;gap:8px;min-width:0;flex:1}
.mwText{min-width:0;flex:1}
.mwMarquee{
  position:relative;
  min-width:0;
  white-space:nowrap;
  overflow:hidden;
  mask-image: linear-gradient(to right, transparent 0, #000 10px, #000 calc(100% - 16px), transparent 100%);
  -webkit-mask-image: linear-gradient(to right, transparent 0, #000 10px, #000 calc(100% - 16px), transparent 100%);
}
.mwMarqueeInner{
  display:inline-flex;
  align-items:center;
  gap:0;
  font-weight:900;
  color:#d86b94;
  font-size:12px;
}
.mwMarqueeInner .mwSub{
  font-weight:750;
  color:var(--muted);
}
.mwT{font-weight:900;color:#d86b94}
.mwMarquee.scroll .mwMarqueeInner{
  animation: mwScroll 10s linear infinite;
}
@keyframes mwScroll{
  from { transform: translateX(0); }
  to { transform: translateX(-100%); }
}
  100%{transform: translateX(-50%)}
}
.mwGap{display:inline-block;width:44px}
.mwPipe{
  color:rgba(216,107,148,.6);
  font-weight:900;
  font-size:11px;
  user-select:none;
}
.mwCtl{
  display:flex;
  align-items:center;
  gap:6px;
  flex:0 0 auto;
}
.mBtn{
  cursor:pointer;
  border:1px solid rgba(244,143,177,.25);
  background:#ffffff;
  color:var(--text);
  padding:7px 8px;
  border-radius:12px;
  font-weight:900;
  font-size:12px;
  line-height:1;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  user-select:none;
  -webkit-tap-highlight-color: transparent;
}
.mBtn:hover{filter:brightness(1.02)}
.mBtn.primary{
  border:none;
  background: linear-gradient(135deg, #f8bbd0, #f48fb1);
  color:#fff;
  box-shadow: 0 8px 18px rgba(244,143,177,.30);
  position:relative;
  overflow:hidden;
}
.mwDrop{
  cursor:pointer;
  border:1px solid rgba(244,143,177,.25);
  background:#ffffff;
  color:var(--text);
  padding:7px 9px;
  border-radius:12px;
  font-weight:900;
  font-size:12px;
  line-height:1;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  flex:0 0 auto;
  -webkit-tap-highlight-color: transparent;
}
.mwDrop:hover{filter:brightness(1.02)}
.mwDrop .chev{
  display:inline-block;
  transform:translateY(1px);
  transition:transform .2s ease;
}
.mwDrop[aria-expanded="true"] .chev{
  transform:rotate(180deg) translateY(-1px);
}

/* ë¦¬ìŠ¤íŠ¸ */
.musicList{
  margin-top:8px;
  border-top:1px dashed rgba(244,143,177,.25);
  padding-top:8px;
  overflow:hidden;
  max-height:0;
  opacity:0;
  transform: translateY(-4px);
  transition: max-height .28s ease, opacity .22s ease, transform .22s ease;
}
.musicList.open{
  max-height:320px;
  opacity:1;
  transform: translateY(0);
}
.track{
  display:flex;align-items:center;gap:10px;
  padding:10px 10px;
  border-radius:14px;
  border:1px solid rgba(244,143,177,.18);
  background:#fffafb;
  cursor:pointer;
}
.track:hover{filter:brightness(1.01)}
.track .idx{font-weight:900;color:#d86b94;font-size:12px;min-width:18px;text-align:center}
.track .name{font-weight:850;font-size:13px;min-width:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.track .dur{margin-left:auto;color:var(--muted);font-size:12px}
.track.active{border-color:rgba(244,143,177,.45);background:#fff3f8}

/* ì¬ìƒ ì¤‘ ìŒí‘œ ë¿…ë¿… */
.noteBurst{
  position:absolute;
  left:50%;top:50%;
  transform:translate(-50%,-50%);
  pointer-events:none;
  opacity:0;
}
.mBtn.primary.playing .noteBurst{opacity:1}
.note{
  position:absolute;
  font-size:14px;
  filter:saturate(.85) brightness(1.05);
  animation: floatNote 1.1s ease-out forwards;
}
@keyframes floatNote{
  0%{transform: translate(0,0) scale(.9); opacity:0}
  10%{opacity:1}
  100%{transform: translate(var(--dx), var(--dy)) scale(1.25); opacity:0}
}

@media (max-width: 900px){
  .musicWidget{max-width:100%;min-width:0}
}

.musicBar.pop{animation: mwPop .24s ease-out;}
@keyframes mwPop{0%{transform:scale(.995)}100%{transform:scale(1)}}



/* ===== Hero CTA layout: keep 2 buttons on one line (desktop), music below ===== */
.hero .ctaRow{flex-wrap:nowrap; align-items:center;}
.hero .musicWrap{margin-top:12px; width:100%;}
/* Keep the music bar nicely sized */
.hero .musicWidget{max-width:520px; width:100%;}

/* Mobile: allow buttons to wrap naturally, center music bar */
@media (max-width: 900px){
  .hero .ctaRow{flex-wrap:wrap; justify-content:center;}
  .hero .musicWrap{display:flex; justify-content:center;}
}


/* ---- Mobile: shrink the music player so it doesn't break layout ---- */
@media (max-width: 900px){
  .hero .musicWidget{max-width:360px; width:100%;}
  .musicBar{
    padding:8px 10px;
    border-radius:16px;
    gap:6px;
  }
  .mwMarqueeInner{font-size:11px}
  .mwMarqueeInner .mwSub{display:none;} /* hide long helper text */
  .mwGap{width:28px}
  .mwPipe{display:none;}               /* remove separators to save space */
  .mBtn{
    padding:6px 7px;
    border-radius:10px;
    font-size:11px;
  }
  .mwDrop{
    padding:6px 8px;
    border-radius:10px;
    font-size:11px;
  }
}


/* ===== ëª¨ë°”ì¼ 'ë¯¸ë‹ˆ' í”Œë ˆì´ì–´ ëª¨ë“œ: ì œëª© + ì¬ìƒ + â–¾ (í¼ì¹˜ë©´ ì´ì „/ë‹¤ìŒ+ëª©ë¡) ===== */
@media (max-width: 900px){
  /* ìƒë‹¨ ë°”ì—ì„œ ê³µê°„ ë¨¹ëŠ” ìš”ì†Œ ìˆ¨ê¹€ */
  #mwSub, .mwPipe, #mwPrev, #mwNext{ display:none !important; }

  /* ë°” ë†’ì´/ì—¬ë°± ì¶•ì†Œ */
  .musicWidget{max-width: 380px;}
  .musicBar{ padding:8px 10px; border-radius:18px; gap:8px; }

  /* ğŸµ ëª¨ë°”ì¼ì—ì„œë„ ì œëª© íë¥´ê²Œ */
  .mwMarquee{ overflow:hidden; }
  .mwMarquee.scroll .mwMarqueeInner{ animation: animation: mwScroll 20s linear infinite;}
  #mwTitle{ font-size:13px; font-weight:800; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; display:block; max-width: 220px; }

  /* ì¬ìƒ ë²„íŠ¼ ì‚´ì§ ì‘ê²Œ */
  .mBtn{ width:30px; height:30px; border-radius:999px; }
  .mBtn.primary{ width:34px; height:34px; }

  /* ë“œë¡­(â–¾) ë²„íŠ¼ */
  .mwDrop{ width:30px; height:30px; border-radius:999px; }

  /* í¼ì¹œ ëª©ë¡ ì˜ì—­: ì• ë‹ˆë©”ì´ì…˜/ì •ë ¬ */
  .musicList{ margin-top:8px; }
  .musicList.open{ animation: mwListPop .18s ease-out; }
  @keyframes mwListPop{ from{ transform: translateY(-4px); opacity:.0 } to{ transform: translateY(0); opacity:1 } }

  /* í¼ì³¤ì„ ë•Œ ìƒë‹¨ ì»¨íŠ¸ë¡¤(ì´ì „/ë‹¤ìŒ) */
  .mwListTop{
    display:flex;
    align-items:center;
    justify-content:center;
    gap:10px;
    padding:8px 10px 6px;
    border:1px solid rgba(244,143,177,.18);
    background: rgba(255,255,255,.65);
    border-radius:16px;
    margin-bottom:8px;
  }
  .mwListTop .miniBtn{
    width:34px;
    height:34px;
    border-radius:999px;
    border:1px solid rgba(244,143,177,.22);
    background:#fff;
    display:inline-flex;
    align-items:center;
    justify-content:center;
    cursor:pointer;
    font-weight:900;
  }
  .mwListTop .miniBtn:active{ transform: translateY(1px); }
  .mwListTop .hint{ font-size:12px; color: var(--muted); font-weight:700; }
}


/* ===== Hero CTA layout: keep original look (buttons on one row, player below) ===== */
.hero .ctaRow{
  flex-wrap:nowrap;
  align-items:center;
  margin-top:12px;
}
.hero .ctaRow .btn{
  flex:0 0 auto;
  white-space:nowrap;
  padding:10px 12px;
  font-size:13px;
}
.hero .musicWrap{
  margin-top:12px;
  width:100%;
}

/* Make player a bit smaller (desktop + mobile) */
.hero .musicWidget{
  width:100%;
  max-width:520px;
  min-width:0;
}
.hero .musicBar{
  padding:8px 10px;
  border-radius:16px;
  gap:8px;
}
.hero .mwText{font-size:12.5px;}
.hero .mBtn{width:30px;height:30px;}
.hero .mBtn.primary{width:34px;height:34px;}
.hero .mwDrop{width:30px;height:30px;}

/* Mobile: center the player and keep buttons pretty */
@media (max-width: 900px){
  .hero .ctaRow{justify-content:center; flex-wrap:wrap;}
  .hero .musicWrap{display:flex; justify-content:center;}
  .hero .musicWidget{max-width:380px;}
}


/* === FIX (Alex): marquee runs via JS (always scroll), so disable CSS animation only for marquee === */
.mwMarquee.scroll .mwMarqueeInner{ animation:none !important; }


/* ===== MOBILE PATCH (2026-02-07) ===== */
html, body{
  width:100%;
  max-width:100%;
  overflow-x:hidden; /* âœ… ê°€ë¡œ ë°€ë¦¼ ë°©ì§€ */
}

.wrap, .topbar .inner{
  width:100%;
}

.hero, .grid, section.card, .musicWidget, .musicBar{
  min-width:0;
}
.hero > *, .musicBar *{
  min-width:0;
}

nav{
  flex-wrap:wrap; /* âœ… ë©”ë‰´ ì¤„ë°”ê¿ˆ */
}

.ctaRow{
  flex-wrap:wrap; /* âœ… ë²„íŠ¼ ê²¹ì¹¨ ë°©ì§€ */
}

@media (max-width: 900px){
  .wrap{padding:18px 14px 54px;}
  .topbar .inner{padding:12px 14px; gap:10px; justify-content:flex-start;}
  .hero{grid-template-columns:1fr; padding:22px 16px;}
  .hero h1{font-size:22px; line-height:1.3;}
  .ctaRow{justify-content:center;}
  .btn{width:auto}
  .grid{grid-template-columns:1fr;}
  .twoCol{grid-template-columns:1fr;}
  .photoGrid{grid-template-columns:repeat(2, 1fr);}
}
/* ===== END PATCH ===== */

</style>

<style>
/* ==== fix: show playlist but only one current title ==== */
/* hide duplicated current-title label inside list rows only */
.musicList .nowPlayingTitle,
.musicList .currentTitle,
.musicList .trackTitle.current{
  display:none !important;
}
</style>

</head>
<body>
  <header class="topbar">
    <div class="inner">
      <div class="brand">
        <span style="display:inline-flex;align-items:center;justify-content:center;width:34px;height:34px;border-radius:12px;border:1px solid var(--line);background:#fff7fa;font-weight:900;">â›µ</span>
        <div>
          <div>ë°©ë‘ ê¸¸ë“œ</div>
          <div class="badge">Mabinogi Mobile Â· ë¼ì‚¬ ì„œë²„</div>
        </div>
      </div>
      <nav>
        <a class="navbtn" href="#home">í™ˆ</a>
        <a class="navbtn" href="#notice">ê³µì§€ì‚¬í•­</a>
        <a class="navbtn" href="#tips">ê²Œì„ê¿€íŒ</a>
        <a class="navbtn" href="#about">ê¸¸ë“œì†Œê°œ</a>
        <a class="navbtn" href="#join">ê¸¸ë“œì•ˆë‚´</a>
      </nav>
    </div>
  </header>

  <main class="wrap" id="home">
    <section class="hero"><div>
        <h1>ê°ìì˜ ì†ë„ë¡œ, ì˜¤ë˜ í•¨ê»˜ ê°€ëŠ” ê¸¸ë“œ <span style="color:var(--brand)">ë°©ë‘</span></h1>
        <p>
          ì†ë„ë³´ë‹¤ ì§€ì†, ê²½ìŸë³´ë‹¤ í˜¸í¡. <br/>
          ê³µì§€ì™€ ê¿€íŒì€ ì—¬ê¸°ì„œ í•œ ë²ˆì— í™•ì¸í•˜ê³ , ê²Œì„ì€ í¸í•˜ê²Œ ì¦ê²¨ìš”.
        </p>
        <div class="chips">
          <span class="chip">ì¹œëª© &amp; í˜‘ë ¥</span>
          <span class="chip">ë¼ì´íŠ¸ ~ ì¤‘ê°„ í•˜ë“œ</span>
          <span class="chip">ì •ë³´ ê³µìœ </span>
          <span class="chip">ì„œë¡œ ì¡´ì¤‘</span>
        </div>

        <div class="ctaRow">
          <a class="btn primary" href="#notice"><span class="emoji">ğŸ“¢</span> ê³µì§€ ë³´ëŸ¬ê°€ê¸°</a>
          <a class="btn" href="#tips"><span class="emoji">ğŸ®</span> ê¿€íŒ ë³´ëŸ¬ê°€ê¸°</a>

          
        
        </div>

        <div class="musicWrap">
<!-- ğŸµ ë°©ë‘ í•‘í¬ ë¯¸ë‹ˆ í”Œë ˆì´ì–´ (í•œ ì¤„ ë°” / ìë™ì¬ìƒ X) -->
          <div class="musicWidget" id="musicWidget">
            <div class="musicBar">
              <div class="mwInfo">
                                <div class="mwText">
                  <div aria-label="í˜„ì¬ ì¬ìƒ" class="mwMarquee" id="mwMarquee">
                    <div class="mwMarqueeInner" id="mwMarqueeInner">
                      <span id="mwTitle">ì¬ìƒí•  ê³¡ì´ ì—†ìŠµë‹ˆë‹¤</span>
                      <span aria-hidden="true" class="mwGap"></span>
                      <span class="mwSub" id="mwSub">ìŒì•… íŒŒì¼ì„ ì˜¬ë ¤ì£¼ì„¸ìš” ğŸµ</span>
                    </div>
                  
        </div>

                </div>
              </div>

              <span aria-hidden="true" class="mwPipe">ã…£</span>

              <div aria-label="ì¬ìƒ ì»¨íŠ¸ë¡¤" class="mwCtl">
                <button aria-label="ì´ì „ ê³¡" class="mBtn" id="mwPrev" type="button">â®</button>
                <button aria-label="ì¬ìƒ/ì •ì§€" aria-pressed="false" class="mBtn primary" id="mwPlay" type="button">
                  <span id="mwPlayIcon">â–¶</span>
                  <span aria-hidden="true" class="noteBurst" id="mwBurst"></span>
                </button>
                <button aria-label="ë‹¤ìŒ ê³¡" class="mBtn" id="mwNext" type="button">â­</button>
              </div>

              <span aria-hidden="true" class="mwPipe">ã…£</span>

              <button aria-expanded="false" aria-label="ê³¡ ëª©ë¡ ì—´ê¸°/ë‹«ê¸°" class="mwDrop" id="mwListToggle" type="button">
                <span class="chev">â–¾</span>
              </button>
            </div>

            <div class="musicList" id="mwList"></div>
            <audio id="mwAudio" preload="none"></audio>
          </div>
        </div>
</div>


    </div><div class="heroCard">
        <div class="kv">
          <div class="kvRow">
            <div class="k">ì„œë²„</div>
            <div class="v">ë¼ì‚¬</div>
          </div>
          <div class="kvRow">
            <div class="k">ë¶„ìœ„ê¸°</div>
            <div class="v">ìœ ì¾Œ + ë§¤ë„ˆ</div>
          </div>
          <div class="kvRow">
            <div class="k">ìš´ì˜</div>
            <div class="v">ì—´ë¦° ì˜ê²¬ ìˆ˜ìš©</div>
          </div>
          <div class="kvRow">
            <div class="k">ê°€ì… ë¬¸ì˜</div>
            <div class="v">ê¸¸ë§ˆ 'êµ°ë¦¼' ê·“</div>
          </div>
        </div>
        <div class="ctaRow">
          <button class="btn" id="copyInvite">ê¸¸ë“œ í™ë³´ ë¬¸êµ¬ ë³µì‚¬</button>
        </div>
      </div></section>

    <div class="grid">
      <!-- ê³µì§€ì‚¬í•­ -->
      <section class="card" id="notice">
        <h2><span class="emoji">ğŸ“¢</span> ê³µì§€ì‚¬í•­</h2>
        <p class="sub">ìš´ì˜/ì´ë²¤íŠ¸/ì¤‘ìš” ê³µì§€ë¥¼ ë¹ ë¥´ê²Œ í™•ì¸í•  ìˆ˜ ìˆì–´ìš”.</p>

        <div class="toolbar" id="noticeFilters">
          <span class="pill active" data-filter="all">ì „ì²´</span>
          <span class="pill" data-filter="ops">ìš´ì˜</span>
          <span class="pill" data-filter="event">ì´ë²¤íŠ¸</span>
          <span class="pill" data-filter="important">ì¤‘ìš”</span>
        </div>

        <div class="list" id="noticeList"></div>
      </section>

      <!-- ğŸ§  ê¿€íŒ ê²Œì‹œíŒ (ë…¸ì…˜ ì—°ë™) -->
      <section class="card" id="tips">
        <h2><span class="emoji">ğŸ®</span> ê¿€íŒ ê²Œì‹œíŒ</h2>
        <p class="sub"> ê²Œì„ì— ë„ì›€ë˜ëŠ” ê¿€íŒì„ í™•ì¸í•  ìˆ˜ ìˆì–´ìš”.</p>

        <div id="tipState" class="sub" style="margin-top:10px;">ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
        <div class="list" id="tipPreview" style="margin-top:14px; display:none;"></div>

        <div class="linkRow">
          <a class="textLinkBtn" href="/tips.html">ê¿€íŒê²Œì‹œíŒ ë°”ë¡œê°€ê¸°</a>
        </div>
      </section>

      <!-- ğŸ“· ì‚¬ì§„ ê²Œì‹œíŒ (ë…¸ì…˜ ì—°ë™) -->
      <section class="card" id="photos">
        <h2><span class="emoji">ğŸ“·</span> ì‚¬ì§„ ê²Œì‹œíŒ</h2>
        <p class="sub">ê¸¸ë“œì›ë“¤ì˜ ìŠ¤í¬ë¦°ìƒ·/ì¶”ì–µì„ ëª¨ì•„ë´ìš” âœ¨</p>

        <div id="photoState" class="sub" style="margin-top:10px;">ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
        <div id="photoPreview" class="photoGrid" style="margin-top:14px; display:none;"></div>

        <div class="linkRow">
          <a class="textLinkBtn" href="/photos.html">ì‚¬ì§„ê²Œì‹œíŒ ë°”ë¡œê°€ê¸°</a>
        </div>
      </section>

    </div>

    <section class="card" id="about">
      <h2><span class="emoji">â›µ</span> ê¸¸ë“œ ì†Œê°œ</h2>
      <p class="sub">ë°©ë‘ì€ â€œì˜¤ë˜ ì¦ê¸¸ ì‚¬ëŒë“¤â€ì„ ìœ„í•œ ê¸¸ë“œì˜ˆìš”. ë§ ê±¸ê¸° ì–´ë ¤ìš´ ë¶„ìœ„ê¸° NO.</p>

      <div class="twoCol">
        <div class="miniCard">
          <h3>ìš°ë¦¬ê°€ ì§€í‚¤ëŠ” ë¶„ìœ„ê¸°</h3>
          <p>
            Â· ì„œë¡œì˜ ì†ë„ ì¡´ì¤‘<br/>
            Â· ê³¼í•œ í›ˆìˆ˜/ë¹„ë‚œ ê¸ˆì§€<br/>
            Â· ì •ë³´ëŠ” ë‚˜ëˆŒìˆ˜ë¡ ê°•í•´ì§
          </p>
        </div>
        <div class="miniCard">
          <h3>ì˜ ë§ëŠ” ë¶„ / ì•ˆ ë§ëŠ” ë¶„</h3>
          <p>
            âœ” ë¼ì´íŠ¸í•˜ê²Œ ì˜¤ë˜ í•˜ê³  ì‹¶ì€ ë¶„<br/>
            âœ” ê°™ì´ ì›ƒê³  í˜‘ë ¥í•˜ëŠ” ê±¸ ì¢‹ì•„í•˜ëŠ” ë¶„<br/><br/>
            âŒ ê²½ìŸÂ·ìˆœìœ„ ìŠ¤íŠ¸ë ˆìŠ¤ê°€ í° ë¶„<br/>
            âŒ ë¹„ë§¤ë„ˆÂ·ë¶€ì ì ˆí•œ ì–¸í–‰ì„ í•˜ì‹œëŠ” ë¶„<br/>
          </p>
        </div>
      </div>
    </section>

    <section class="card" id="join">
      <h2><span class="emoji">ğŸ¤</span> ê¸¸ë“œ ì•ˆë‚´</h2>
      <p class="sub">ë°©ë‘ì— ëŒ€í•´ ê°„ë‹¨í•˜ê²Œ ì†Œê°œë“œë ¤ìš” ! </p>

      <div class="twoCol">
        <div class="miniCard">
          <h3>ê°„ë‹¨ ê·œì¹™</h3>
          <p>
            Â· ë§¤ë„ˆ/ê¸°ë³¸ ì˜ˆì˜ í•„ìˆ˜<br/>
            Â· ë‹¨í†¡(í•„ìˆ˜)/ë””ì½”(ììœ ) ì°¸ì—¬<br/>
            Â· ì‚¬ì „ ê³µìœ ì—†ì´ 5ì¼ ì´ìƒ ë¯¸ì ‘ ì‹œ ì¶”ë°©
          </p>
        </div>
        <div class="miniCard">
          <h3>ì†Œí†µ ë°©ë²•</h3>
          <p>
            Â· ì˜¤í”ˆì±„íŒ… : https://open.kakao.com/o/g5QEodph<br/>
            Â· ë””ìŠ¤ì½”ë“œ : https://discord.gg/3Ju6HZ99kJ<br/>
            Â· ìš´ì˜ì§„ : ê¸¸ë§ˆ 'êµ°ë¦¼' & ë¶€ê¸¸ë§ˆ 'ì§êµ¬' 'ì½©íŒ¥' 'ë„ˆí¬ì§‘ë§‰ë‚´'
          </p>
        </div>
      </div>
    </section>

    


    <footer>
  <div style="font-weight:600; color:#c86a8a; margin-bottom:4px;">
    ê°ìì˜ ì†ë„ë¡œ, ì˜¤ë˜ í•¨ê»˜ ğŸŒ¸
  </div>
  <div style="font-size:12px;">
    Â© ë°©ë‘ ê¸¸ë“œ Â· Mabinogi Mobile Lasa Server<br/>
    This is a fan-made guild page Â· with love ğŸ’•<br/>
    ì œì‘/ìˆ˜ì • ë„ì›€: ë„ˆí¬ì§‘ë§‰ë‚´ with ì•Œë ‰ìŠ¤
  </div>
</footer>
  </main>

  


  
  <!-- Supabase (ì‚¬ì§„ ë¯¸ë¦¬ë³´ê¸°ìš©) -->
  <script defer src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <!-- photos.htmlê³¼ ê°™ì€ ì„¤ì • íŒŒì¼ì„ ë£¨íŠ¸ì— ë‘ë©´ ì¸ë±ìŠ¤ì—ì„œë„ ê·¸ëŒ€ë¡œ ì”ë‹ˆë‹¤ -->
  <script defer src="/supabase_config.js"></script>

  <script>
  (function(){ var d=document.getElementById("debugBadge"); if(d){ d.textContent="JS: main start"; } })();
  
  function whenSupabaseReady(cb){
    // supabase-js v2 sets global `supabase`
    const startedAt = Date.now();
    const timer = setInterval(()=>{
      if(window.SUPABASE_URL && window.SUPABASE_ANON_KEY){
        clearInterval(timer);
        cb();
      }else if(Date.now() - startedAt > 8000){
        clearInterval(timer);
        // Don't block the rest of the page if Supabase is missing
        const p = document.getElementById("photoState");
        if(p) p.textContent = "ì‚¬ì§„ ë¯¸ë¦¬ë³´ê¸°ëŠ” ì¤€ë¹„ ì¤‘ì´ì—ìš” (supabase ì„¤ì • í™•ì¸ í•„ìš”)";
        const d = document.getElementById("debugBadge");
        if(d && d.textContent.startsWith("JS:")) d.textContent = "JS: notices ok / photos skip";
      }
    }, 120);
  }


  /* =========================
     âœ… ë°©ë‘ ê¸¸ë“œ ì¸ë±ìŠ¤
     - ê³µì§€/ê¿€íŒ: Notion DB â†’ Netlify Functionsë¡œ ê°€ì ¸ì™€ì„œ "ì œëª© í´ë¦­ ì‹œ í¼ì¹¨"
     - ì‚¬ì§„: Supabase ì‚¬ì§„ê²Œì‹œíŒì—ì„œ ìµœê·¼ 6ì¥ ë¯¸ë¦¬ë³´ê¸°
  ========================= */

  // ---------- utils ----------
  const $ = (id) => document.getElementById(id);
  
  // ---- global error surface (so one JS error doesn't look like "stuck loading") ----
  const dbg = document.getElementById("debugBadge");
  function setDbg(s){ if(dbg) dbg.textContent = s; }
  function showLoadError(msg){
    const n = $("noticeList");
    const t = $("tipState");
    const p = $("photoState");
    if(n) n.innerHTML = `<div class="item"><p class="sub" style="margin:0">ì˜¤ë¥˜: ${escapeHtml(msg)}</p></div>`;
    if(t) t.textContent = "ì˜¤ë¥˜: " + msg;
    if(p) p.textContent = "ì˜¤ë¥˜: " + msg;
  }
  window.addEventListener("error", (e)=>{
    console.warn("page error", e);
    showLoadError(e?.message || "ìŠ¤í¬ë¦½íŠ¸ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆì–´ìš”.");
  });
  window.addEventListener("unhandledrejection", (e)=>{
    console.warn("unhandledrejection", e);
    showLoadError(e?.reason?.message || String(e?.reason || "ìš”ì²­ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆì–´ìš”."));
  });


  function escapeHtml(s){
    return String(s||"")
      .replace(/&/g,"&amp;")
      .replace(/</g,"&lt;")
      .replace(/>/g,"&gt;")
      .replace(/"/g,"&quot;")
      .replace(/'/g,"&#39;");
  }

  function toParagraphs(text){
    const safe = escapeHtml(text||"");
    return safe.split(/\n+/).map(p=>`<p style="margin:0 0 10px">${p}</p>`).join("") || "";
  }

function renderImages(urls){
    const list = (urls || []).filter(Boolean);
    if(!list.length) return "";
    return `
      <div style="margin-top:10px; display:grid; gap:10px;">
        ${list.slice(0,6).map(u=>`
          <a href="${escapeHtml(u)}" target="_blank" rel="noopener" style="display:block">
            <img src="${escapeHtml(u)}" alt="image" style="width:100%; height:auto; display:block; border-radius:14px; border:1px solid rgba(244,143,177,.18); background:#fff7fa;">
          </a>
        `).join("")}
      </div>
    `;
  }

  function safe(obj, path, fallback="") {
    try {
      return path.split(".").reduce((a,k)=> (a && a[k]!==undefined) ? a[k] : undefined, obj) ?? fallback;
    } catch(e){ return fallback; }
  }

  
  function mapPage(p){
    const props = p.properties || {};

    // ---- title (ì œëª©/Title/ì´ë¦„ ë“±) ----
    const titleProp =
      props["ì œëª©"]?.title ?? props["Title"]?.title ?? props["ì´ë¦„"]?.title ?? props["Name"]?.title ?? [];
    const title = (titleProp || []).map(x=>x.plain_text).join("") || "(ì œëª© ì—†ìŒ)";

    // ---- date (ì‘ì„±ì¼/Date/ë‚ ì§œ ë“±) ----
    const date =
      props["ì‘ì„±ì¼"]?.date?.start
      || props["Date"]?.date?.start
      || props["ë‚ ì§œ"]?.date?.start
      || props["ì‘ì„± ë‚ ì§œ"]?.date?.start
      || "";

    // ---- icon (emoji only) ----
    const icon = p.icon && p.icon.type === "emoji" ? p.icon.emoji : "";

    // ---- category (ì¹´í…Œê³ ë¦¬/Category/ë¶„ë¥˜, select or multi_select first) ----
    const category =
      props["ì¹´í…Œê³ ë¦¬"]?.select?.name
      || props["Category"]?.select?.name
      || props["ë¶„ë¥˜"]?.select?.name
      || props["ì¹´í…Œê³ ë¦¬"]?.multi_select?.[0]?.name
      || props["Category"]?.multi_select?.[0]?.name
      || props["ë¶„ë¥˜"]?.multi_select?.[0]?.name
      || "";

    // ---- body (ë‚´ìš©/ë³¸ë¬¸/ì„¤ëª…/Description) ----
    const body =
      (props["ë‚´ìš©"]?.rich_text || props["ë³¸ë¬¸"]?.rich_text || props["ì„¤ëª…"]?.rich_text || props["Description"]?.rich_text || [])
        .map(x=>x.plain_text).join("")
      || "";

    // ---- tags (íƒœê·¸/Tags/í•´ì‹œíƒœê·¸, multi_select or select) ----
    const tagFromSelect =
      props["íƒœê·¸"]?.select?.name
      || props["Tags"]?.select?.name
      || props["í•´ì‹œíƒœê·¸"]?.select?.name
      || props["tag"]?.select?.name
      || "";

    const tagList =
      props["íƒœê·¸"]?.multi_select
      || props["Tags"]?.multi_select
      || props["í•´ì‹œíƒœê·¸"]?.multi_select
      || props["tag"]?.multi_select
      || [];

    const tags = [
      ...(tagFromSelect ? [tagFromSelect] : []),
      ...((tagList || []).map(x=>x.name).filter(Boolean))
    ];

    // ---- images (Notion DB property files OR page cover) ----
    // âš ï¸ Notion DB query ê²°ê³¼ë§Œìœ¼ë¡œëŠ” "ë³¸ë¬¸ì— ì‚½ì…ëœ ì´ë¯¸ì§€ ë¸”ë¡"ê¹Œì§€ ê°€ì ¸ì˜¤ì§€ ëª»í•´ìš”.
    // ëŒ€ì‹  DBì— files ì†ì„±(ì˜ˆ: 'ì´ë¯¸ì§€'/'Image'/'ì²¨ë¶€')ì„ ë§Œë“¤ì–´ ì˜¬ë ¤ë‘” ì´ë¯¸ì§€ URLì„ í‘œì‹œí•©ë‹ˆë‹¤.
    const fileProp =
      props["ì´ë¯¸ì§€"]?.files
      || props["Image"]?.files
      || props["ì²¨ë¶€"]?.files
      || props["Files"]?.files
      || [];

    const imagesFromProp = (fileProp || []).map(f=>{
      if(!f) return "";
      if(f.type === "external") return f.external?.url || "";
      if(f.type === "file") return f.file?.url || "";
      return "";
    }).filter(Boolean);

    const coverUrl = (p.cover?.type === "external") ? (p.cover.external?.url || "")
                    : (p.cover?.type === "file") ? (p.cover.file?.url || "")
                    : "";

    const images = [...imagesFromProp, ...(coverUrl ? [coverUrl] : [])];

    return { title, date, icon, category, body, tags, images };
  }


  async function fetchList(type){
    setDbg(`JS: fetch ${type}â€¦`);
    const url = `/.netlify/functions/notion?type=${type}`;
    const res = await fetch(url, { cache: "no-store" });

    // Try JSON; if it fails, keep raw text for debugging
    let data = null;
    let raw = "";
    try{
      data = await res.json();
    }catch(e){
      try{ raw = await res.text(); }catch(_){}
      data = {};
    }

    if(!res.ok){
      console.warn("Notion fetch error", type, data, raw);
      throw new Error((data && data.message) || `fetch failed (${res.status})`);
    }

    const results = (data && data.results) ? data.results : [];
    setDbg(`JS: ${type} ${results.length}ê°œ`);
    return results.map(mapPage);
  }

  // ---------- ê³µì§€: ì œëª©ë§Œ ë³´ì´ë‹¤ê°€ í¼ì¹¨ ----------
  async function renderNotices(){
    const el = $("noticeList");
    if(!el) return;

    el.innerHTML = `<div class="item"><p class="sub" style="margin:0">ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p></div>`;

    try{
      const list = await fetchList("notice");

      // ğŸ“Œ ê³ ì • ìš°ì„ , ìµœì‹ ìˆœ
      list.sort((a,b)=>{
        const ap = a.icon === "ğŸ“Œ" ? 1 : 0;
        const bp = b.icon === "ğŸ“Œ" ? 1 : 0;
        if(ap !== bp) return bp - ap;
        return (b.date || "").localeCompare(a.date || "");
      });

      if(list.length === 0){
        el.innerHTML = `<div class="item"><p class="sub" style="margin:0">í‘œì‹œí•  ê³µì§€ê°€ ì—†ì–´ìš”.</p></div>`;
        return;
      }

      // ìƒë‹¨ í•„í„°(ì „ì²´/ìš´ì˜/ì´ë²¤íŠ¸/ì¤‘ìš”) ë™ì‘: categoryê°€ ê·¸ ë‹¨ì–´ë¥¼ í¬í•¨í•˜ë©´ ë§¤ì¹­
      const currentFilter = $("noticeFilters")?.querySelector(".pill.active")?.dataset.filter || "all";
      const filtered = list.filter(item=>{
        if(currentFilter === "all") return true;
        const cat = (item.category || "").toLowerCase();
        if(currentFilter === "ops") return cat.includes("ìš´ì˜");
        if(currentFilter === "event") return cat.includes("ì´ë²¤íŠ¸");
        if(currentFilter === "important") return cat.includes("ì¤‘ìš”") || item.icon === "ğŸ“Œ";
        return true;
      });

      if(filtered.length === 0){
        el.innerHTML = `<div class="item"><p class="sub" style="margin:0">í•´ë‹¹ í•„í„°ì˜ ê³µì§€ê°€ ì—†ì–´ìš”.</p></div>`;
        return;
      }

      el.innerHTML = filtered.slice(0,4).map(item=>{
        const badgePin = item.icon==="ğŸ“Œ" ? `<span class="tag important">ğŸ“Œ ê³ ì •</span>` : "";
        const cat = item.category ? `<span class="tag">${escapeHtml(item.category)}</span>` : "";
        const meta = `
          <div class="meta">
            ${badgePin}${cat}
            ${item.date ? `<span>ğŸ“… ${escapeHtml(item.date)}</span>` : ``}
          </div>
        `;

        // âœ… ë§í¬ ì—†ìŒ: ì œëª© í´ë¦­ â†’ í¼ì¹¨
        return `
          <div class="item">
            <div class="itemTop">
              <div style="width:100%">
                <p class="title">${escapeHtml(item.title)}</p>
                ${meta}
              </div>
            </div>
            <details>
              <summary>ë‚´ìš© ë³´ê¸°</summary>
              <div class="content">${renderImages(item.images)}${toParagraphs(item.body)}</div>
            </details>
          </div>
        `;
      }).join("");
    }catch(e){
      el.innerHTML = `<div class="item"><p class="sub" style="margin:0">ê³µì§€ ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨: ${escapeHtml(e.message || String(e))}</p></div>`;
    }
  }

  
  // ---------- ê¿€íŒ ë¯¸ë¦¬ë³´ê¸°: Notionì—ì„œ ìµœì‹  4ê°œ ----------
  async function renderTipPreview(){
    const stateEl = $("tipState");
    const listEl  = $("tipPreview");
    if(!stateEl || !listEl) return;

    stateEl.style.display = "block";
    listEl.style.display = "none";
    stateEl.textContent = "ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...";

    try{
      const list = await fetchList("tips");
      list.sort((a,b)=> (b.date||"").localeCompare(a.date||""));

      if(!list.length){
        stateEl.textContent = "ì•„ì§ ë“±ë¡ëœ ê¿€íŒì´ ì—†ì–´ìš”. ì²« ê¿€íŒ ì˜¬ë ¤ì¤˜ìš” ğŸ’–";
        listEl.style.display = "none";
        return;
      }

      stateEl.style.display = "none";
      listEl.style.display = "grid";
      listEl.innerHTML = list.slice(0,4).map(item=>{
        const tags = (item.tags||[]).filter(Boolean);
        const mainBadges = (tags.length ? tags.slice(0,2) : (item.category ? [item.category] : []))
          .map(t=>`<span class="tag">${escapeHtml(t)}</span>`).join("");
        return `
          <div class="item">
            <div class="itemTop">
              <div style="width:100%">
                <p class="title">${escapeHtml(item.title)}</p>
                <div class="meta" style="margin-top:8px">
                  ${mainBadges}
                  ${item.date ? `<span>ğŸ“… ${escapeHtml(item.date)}</span>` : ``}
                </div>
              </div>
            </div>
            <details>
              <summary>ë‚´ìš© ë³´ê¸°</summary>
              <div class="content">${renderImages(item.images)}${toParagraphs(item.body)}</div>
            </details>
          </div>
        `;
      }).join("");
    }catch(e){
      stateEl.textContent = "ê¿€íŒ ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨: " + (e?.message || String(e));
      listEl.style.display = "none";
    }
  }


  // ---------- ì‚¬ì§„ ë¯¸ë¦¬ë³´ê¸°: Supabase ì‚¬ì§„ê²Œì‹œíŒì—ì„œ ìµœê·¼ 6ì¥ ----------
  async function renderPhotoPreview(){
    const stateEl = $("photoState");
    const gridEl  = $("photoPreview");
    if(!stateEl || !gridEl) return;

    const BUCKET = "bangrang-photos";
    const TABLE  = "photo_posts";

    // supabase_config.js ëˆ„ë½ ì‹œ
    if(!window.SUPABASE_URL || !window.SUPABASE_ANON_KEY){
      stateEl.textContent = "ì‚¬ì§„ ë¯¸ë¦¬ë³´ê¸° ì„¤ì •ì´ ì•„ì§ ì—†ì–´ìš”. (supabase_config.js í™•ì¸)";
      gridEl.style.display = "none";
      return;
    }

    stateEl.style.display = "block";
    stateEl.textContent = "ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...";
    gridEl.style.display = "none";

    try{
      // REST APIë¡œ ì§ì ‘ ì¡°íšŒ(ë¼ì´ë¸ŒëŸ¬ë¦¬ ì˜ì¡´ì„± ì œê±°)
      const url = window.SUPABASE_URL.replace(/\/$/,"") + `/rest/v1/${TABLE}?select=id,image_path,caption,nickname,created_at,taken_on&order=created_at.desc&limit=4`;
      const res = await fetch(url, {
        headers: {
          apikey: window.SUPABASE_ANON_KEY,
          Authorization: "Bearer " + window.SUPABASE_ANON_KEY
        }
      });
      const txt = await res.text();
      if(!res.ok){
        throw new Error(`DB ì¡°íšŒ ì‹¤íŒ¨ (${res.status}) ${txt.slice(0,120)}`);
      }
      let data = [];
      try{ data = JSON.parse(txt); }catch(_e){ data = []; }

      if(!data || data.length === 0){
        stateEl.textContent = "ì•„ì§ ë“±ë¡ëœ ì‚¬ì§„ì´ ì—†ì–´ìš”. ì²« ì—…ë¡œë“œ í•´ì¤˜ìš” ğŸ’–";
        gridEl.style.display = "none";
        return;
      }

      // public URL ì§ì ‘ êµ¬ì„±
      const base = window.SUPABASE_URL.replace(/\/$/,"") + `/storage/v1/object/public/${BUCKET}/`;

      stateEl.style.display = "none";
      gridEl.style.display = "grid";
      gridEl.innerHTML = data.map(row=>{
        const path = row.image_path || "";
        // encodeURIëŠ” ìŠ¬ë˜ì‹œë¥¼ ìœ ì§€(í´ë” ê²½ë¡œ ì§€ì›)
        const imgUrl = base + encodeURI(path);
        const title = escapeHtml(row.caption || "ì‚¬ì§„");
        const who = escapeHtml(row.nickname || "ìµëª…");
        return `
          <a class="miniCard" href="/photos.html" style="padding:10px; border-radius:18px; overflow:hidden;">
            <div style="width:100%; aspect-ratio:1/1; border-radius:14px; overflow:hidden; border:1px solid rgba(244,143,177,.18); background:#fff7fa;">
              <img src="${imgUrl}" alt="${title}" style="width:100%; height:100%; object-fit:cover; display:block;">
            </div>
            <div style="margin-top:8px; font-weight:800; font-size:13px; line-height:1.25; color:var(--text); overflow:hidden; text-overflow:ellipsis; white-space:nowrap;">${title}</div>
            <div style="margin-top:4px; font-size:12px; color:var(--muted); overflow:hidden; text-overflow:ellipsis; white-space:nowrap;">ğŸ‘¤ ${who}</div>
          </a>
        `;
      }).join("");
    }catch(err){
      console.warn("photo preview error", err);
      stateEl.textContent = "ì‚¬ì§„ ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨: " + (err?.message || err);
      gridEl.style.display = "none";
    }
  }

  // ---------- UI events ----------
  // ê³µì§€ í•„í„° í´ë¦­ â†’ ë‹¤ì‹œ ë Œë”
  const noticeFilters = $("noticeFilters");
  if(noticeFilters){
    noticeFilters.addEventListener("click", (e)=>{
      const pill = e.target.closest(".pill");
      if(!pill) return;
      [...noticeFilters.querySelectorAll(".pill")].forEach(p=>p.classList.remove("active"));
      pill.classList.add("active");
      setDbg('JS: renderâ€¦');
  renderNotices();
    });
  }

  // ì´ˆëŒ€ ë¬¸êµ¬ ë³µì‚¬ ë²„íŠ¼(ê¸°ì¡´ ìœ ì§€)
  const copyBtn = $("copyInvite");
  if(copyBtn){
    copyBtn.addEventListener("click", async ()=>{
      const text =
`6ë ™ [ë°©ë‘]ì—ì„œ í•¨ê»˜í•˜ì‹¤ ì—¬í–‰ì ë¶„ì„ ì°¾ì•„ìš”!
- ë¼ì´íŠ¸~ì¤‘ê°„ í•˜ë“œ / ì¹œëª©&í˜‘ë ¥ / ì˜µí†¡í•„,ë””ì½”ììœ 
- ë¬¸ì˜: ê¸¸ë§ˆ 'êµ°ë¦¼' ê·“`;
      try{
        await navigator.clipboard.writeText(text);
        alert("ì´ˆëŒ€ ë¬¸êµ¬ë¥¼ ë³µì‚¬í–ˆì–´ìš”!");
      }catch(err){
        prompt("ë³µì‚¬ ê¶Œí•œì´ ì—†ì–´ì„œ ì§ì ‘ ë³µì‚¬í•´ì£¼ì„¸ìš”:", text);
      }
    });
  }


  // ---------- ğŸµ ë°©ë‘ í•‘í¬ ë¯¸ë‹ˆ í”Œë ˆì´ì–´ ----------
  // âœ… ì²˜ìŒì—” 1ê³¡ë§Œ ë³´ì´ê²Œ, 'ë¦¬ìŠ¤íŠ¸' ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì•„ë˜ë¡œ í¼ì³ì ¸ìš”.
  // âœ… ìë™ì¬ìƒ X (ì‚¬ìš©ì í´ë¦­ìœ¼ë¡œë§Œ ì¬ìƒ)
  // âœ… ì•„ë˜ playlist ë°°ì—´ì— ê³¡ì„ ì¶”ê°€í•˜ë©´ ì—¬ëŸ¬ ê³¡ë„ ê°€ëŠ¥!

  try{
const mw = {
    title: $("mwTitle"),
    sub: $("mwSub"),
    marquee: $("mwMarquee"),
    marqueeInner: $("mwMarqueeInner"),
    playIcon: $("mwPlayIcon"),
    audio: $("mwAudio"),
    list: $("mwList"),
    listToggle: $("mwListToggle"),
    prev: $("mwPrev"),
    next: $("mwNext"),
    play: $("mwPlay"),
    burst: $("mwBurst"),
  };

  const playlist = [
  { 
    title: "ë°©ë‘ A", 
    artist: "Lyrics by ë„ˆí¬ì§‘ë§‰ë‚´ Prod. ì½©ì•Œì´", 
    src: "https://crphaesxzewgutqjielu.supabase.co/storage/v1/object/public/music/Bangrang_Guild_A.mp3"
  },
  { 
    title: "ë°©ë‘ B", 
    artist: "Lyrics by ë„ˆí¬ì§‘ë§‰ë‚´ Prod. ì½©ì•Œì´", 
    src: "https://crphaesxzewgutqjielu.supabase.co/storage/v1/object/public/music/Barng_Guild_B.mp3"
  },
  { 
    title: "ì½©íŒ¥ë‹¨ ì¼€ì´íŒ", 
    artist: "by ì½©ì•Œì´", 
    src: "https://crphaesxzewgutqjielu.supabase.co/storage/v1/object/public/music/kongpatdan-kpop-by-kongali.mp3"
  },
  { 
    title: "ì¼ì–´ë‚˜ë¼ ìš©ì‚¬ë“¤", 
    artist: "by ì½©ì•Œì´", 
    src: "https://crphaesxzewgutqjielu.supabase.co/storage/v1/object/public/music/Awakening-by-kongali.mp3"
  }
];


  if(mw.audio && mw.play && mw.list && mw.title && mw.sub){
    let idx = 0;
    let playing = false;
    let burstTimer = null;

    const setPlayUI = ()=>{
      mw.play.setAttribute("aria-pressed", playing ? "true" : "false");
      mw.play.classList.toggle("playing", playing);
      if(mw.playIcon) mw.playIcon.textContent = playing ? "â¸" : "â–¶";
    };


    
    // === JS marquee (always scroll, even short titles) ===
    let mwMarqueeRAF = null;
    function startMarqueeAlways(){
      if(!mw.marquee || !mw.marqueeInner) return;

      // Cancel previous loop
      if(mwMarqueeRAF){ cancelAnimationFrame(mwMarqueeRAF); mwMarqueeRAF = null; }

      const wrap = mw.marquee;
      const inner = mw.marqueeInner;

      // Get plain text (strip tags)
      const text = (inner.textContent || "").trim();
      if(!text){
        inner.style.transform = "translateX(0)";
        return;
      }

      // Build 2 copies for seamless loop
      inner.innerHTML = `
        <span class="mwLine">${escapeHtml(text)}</span>
        <span class="mwGap" aria-hidden="true"></span>
        <span class="mwLine">${escapeHtml(text)}</span>
      `;

      // Ensure layout measures correctly
      inner.style.display = "inline-flex";
      inner.style.alignItems = "center";
      inner.style.willChange = "transform";

      const first = inner.querySelector(".mwLine");
      const gap = inner.querySelector(".mwGap");
      // âœ… ë‘ ë²ˆì§¸ ë³µì‚¬ë³¸ì´ í™”ë©´ì— ê°™ì´ ë³´ì´ì§€ ì•Šê²Œ, ê°„ê²©ì„ ì»¨í…Œì´ë„ˆ í­ë§Œí¼ í¬ê²Œ ì¡ì•„ìš”
      const wrapW = wrap.getBoundingClientRect().width;
      const gapW = Math.max(wrapW + 40, 200);
      if(gap) gap.style.width = gapW + "px";

      let x = 0;
      const speed = 0.55; // px per frame-ish (tweakable)

      function tick(){
        const firstW = first ? first.getBoundingClientRect().width : inner.getBoundingClientRect().width;
        const resetAt = -(firstW + gapW);
        x -= speed;
        if(x <= resetAt) x = 0;
        inner.style.transform = `translateX(${x}px)`;
        mwMarqueeRAF = requestAnimationFrame(tick);
      }

      mwMarqueeRAF = requestAnimationFrame(tick);
    }

const updateMarquee = ()=>{
      if(!mw.marquee || !mw.marqueeInner) return;

      const t = (mw.title?.textContent || "").trim();
      const s = (mw.sub?.textContent || "").trim();
      const line = s
        ? `<span class="mwT">${escapeHtml(t)}</span><span aria-hidden="true"> Â· </span><span class="mwSub">${escapeHtml(s)}</span>`
        : `<span class="mwT">${escapeHtml(t)}</span>`;

      // âœ… í•œ ë²ˆë§Œ ì¶œë ¥
       mw.marqueeInner.innerHTML = line;
      // ì˜¤ë²„í”Œë¡œìš°ì¼ ë•Œë§Œ ìŠ¤í¬ë¡¤
      requestAnimationFrame(()=>{
        const need = mw.marqueeInner.scrollWidth > mw.marquee.clientWidth + 8;
        mw.marquee.classList.toggle("scroll", need);
      });
    };

    // Always run JS marquee (CSS animation disabled above)
    startMarqueeAlways();

    
const renderList = ()=>{
  if(!playlist.length){
    mw.list.innerHTML = "";
    return;
  }
  const mobile = window.matchMedia("(max-width: 900px)").matches;

  const top = mobile ? `
    <div class="mwListTop">
      <button class="miniBtn" type="button" data-act="prev" aria-label="ì´ì „ ê³¡">â®</button>
      <div class="hint">ê³¡ ì„ íƒ</div>
      <button class="miniBtn" type="button" data-act="next" aria-label="ë‹¤ìŒ ê³¡">â­</button>
    </div>
  ` : "";

  const tracks = playlist.map((t, i)=>{
    const active = i===idx ? "active" : "";
    return `
      <div class="track ${active}" data-idx="${i}">
        <div class="idx">${i+1}</div>
        <div class="name">${escapeHtml(t.title || "(ì œëª© ì—†ìŒ)")}</div>
        <div class="dur">${i===idx && playing ? "ì¬ìƒì¤‘" : ""}</div>
      </div>
    `;
  }).join("");

  mw.list.innerHTML = top + tracks;
};


    const load = (i, autoplay=false)=>{
      if(!playlist.length){
        mw.title.textContent = "ì¬ìƒí•  ê³¡ì´ ì—†ìŠµë‹ˆë‹¤";
        mw.sub.textContent = "ìŒì•… íŒŒì¼ì„ ì˜¬ë ¤ì£¼ì„¸ìš” ğŸµ";
        mw.audio.removeAttribute("src");
        updateMarquee();
        renderList();
        return;
      }
      idx = (i + playlist.length) % playlist.length;
      const t = playlist[idx];
      mw.title.textContent = t.title || "(ì œëª© ì—†ìŒ)";
      mw.sub.textContent = t.artist || "";
      mw.audio.src = t.src;
      mw.audio.load();
      updateMarquee();
      renderList();
      if(autoplay) play();
    };

    const spawnNote = ()=>{
      if(!mw.burst) return;
      const note = document.createElement("span");
      note.className = "note";
      note.textContent = Math.random() < 0.6 ? "â™ª" : "ğŸµ";

      const dx = (Math.random()*90 - 45).toFixed(1) + "px";
      const dy = (-(Math.random()*70 + 35)).toFixed(1) + "px";
      note.style.setProperty("--dx", dx);
      note.style.setProperty("--dy", dy);

      // ìœ„ì¹˜ë¥¼ ì‚´ì§ ëœë¤
      note.style.left = (Math.random()*18 - 9).toFixed(1) + "px";
      note.style.top = (Math.random()*10 - 5).toFixed(1) + "px";

      mw.burst.appendChild(note);
      note.addEventListener("animationend", ()=> note.remove(), { once:true });
    };

    const startBurst = ()=>{
      stopBurst();
      spawnNote();
      burstTimer = setInterval(spawnNote, 320);
    };
    const stopBurst = ()=>{
      if(burstTimer){ clearInterval(burstTimer); burstTimer = null; }
      if(mw.burst) mw.burst.innerHTML = "";
    };

    const play = async ()=>{
      try{
        await mw.audio.play();
        playing = true;
        setPlayUI();
        startBurst();
        renderList();
      }catch(err){
        playing = false;
        setPlayUI();
        stopBurst();
        alert("ìŒì•…ì„ ì¬ìƒí•  ìˆ˜ ì—†ì–´ìš” ğŸ˜¢\n(1) íŒŒì¼ ê²½ë¡œê°€ ë§ëŠ”ì§€\n(2) mp3ê°€ ì‚¬ì´íŠ¸ì— ì—…ë¡œë“œë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•´ì¤˜ìš”!");
      }
    };

    const pause = ()=>{
      mw.audio.pause();
      playing = false;
      setPlayUI();
      stopBurst();
      renderList();
    };

    mw.play.addEventListener("click", ()=>{
      if(!playlist.length) return;
      if(mw.audio.paused) play(); else pause();
    });
    mw.next.addEventListener("click", ()=> load(idx+1, playing));
    mw.prev.addEventListener("click", ()=> load(idx-1, playing));

    mw.audio.addEventListener("ended", ()=>{
      load(idx+1, true);  // â† ìë™ ë‹¤ìŒê³¡
    });

// ë¦¬ìŠ¤íŠ¸ í¼ì¹˜ê¸°/ì ‘ê¸°
    if(mw.listToggle){
      mw.listToggle.addEventListener("click", ()=>{
        const open = mw.list.classList.toggle("open");
        mw.listToggle.setAttribute("aria-expanded", open ? "true" : "false");
        // âœ¨ ì‚´ì§ íŒ ì• ë‹ˆë©”ì´ì…˜
        const bar = document.querySelector("#musicWidget .musicBar");
        if(bar){
          bar.classList.remove("pop");
          // reflow
          void bar.offsetWidth;
          bar.classList.add("pop");
        }
      });
    }

    // ë¦¬ìŠ¤íŠ¸ì—ì„œ ê³¡ ì„ íƒ
    mw.list.addEventListener("click", (e)=>{
      const actBtn = e.target.closest("[data-act]");
      if(actBtn){
        const act = actBtn.getAttribute("data-act");
        if(act==="prev") { load(idx-1, true); }
        if(act==="next") { load(idx+1, true); }
        return;
      }

      const row = e.target.closest(".track");
      if(!row) return;
      const i = Number(row.dataset.idx);
      load(i, true);
    });

    // ìµœì´ˆ ë¡œë“œ(ì²˜ìŒì—” 1ê³¡ë§Œ ì¹´ë“œì— í‘œì‹œ)
    load(0, false);
    setPlayUI();
  
    // Start marquee immediately (even before play)
    startMarqueeAlways();
}

  }
catch(e){ console.warn('music widget error', e); }

// ---------- start ----------
  setDbg('JS: renderâ€¦');
  renderNotices();
  renderTipPreview();
  whenSupabaseReady(renderPhotoPreview);
  </script>


<script>
/* fallback: if duplicate titles render, keep only first */
document.addEventListener("DOMContentLoaded", function(){
  const els = document.querySelectorAll("#musicTitle, .musicTitle");
  if(els.length > 1){
    for(let i=1;i<els.length;i++){
      els[i].remove();
    }
  }
});
</script>

</body>
</html>
